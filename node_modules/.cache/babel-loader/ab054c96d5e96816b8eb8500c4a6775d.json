{"remainingRequest":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\babel-loader\\lib\\index.js!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\components\\jeecgbiz\\thirdApp\\JThirdAppButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\components\\jeecgbiz\\thirdApp\\JThirdAppButton.vue","mtime":1665386876000},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\babel-loader\\lib\\index.js","mtime":1665642924601},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js","mtime":1665642924058}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"D:/\\u4E91\\u665F/\\u524D\\u7AEF/ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction } from '@/api/manage';\nimport { cloneObject } from '@/utils/util';\nimport JThirdAppDropdown from './JThirdAppDropdown';\nvar backEndUrl = {\n  // 获取启用的第三方App\n  getEnabledType: '/sys/thirdApp/getEnabledType',\n  // 企业微信\n  wechatEnterprise: {\n    user: '/sys/thirdApp/sync/wechatEnterprise/user',\n    depart: '/sys/thirdApp/sync/wechatEnterprise/depart'\n  },\n  // 钉钉\n  dingtalk: {\n    user: '/sys/thirdApp/sync/dingtalk/user',\n    depart: '/sys/thirdApp/sync/dingtalk/depart'\n  }\n};\nexport default {\n  name: 'JThirdAppButton',\n  components: {\n    JThirdAppDropdown: JThirdAppDropdown\n  },\n  props: {\n    // 同步类型，可以是 user、depart\n    bizType: {\n      type: String,\n      required: true\n    },\n    // 是否允许同步到第三方APP\n    syncToApp: Boolean,\n    // 是否允许第三方APP同步到本地\n    syncToLocal: Boolean,\n    // 选择的行\n    selectedRowKeys: Array\n  },\n  data: function data() {\n    return {\n      enabledTypes: {},\n      attrs: {\n        dingtalk: {}\n      }\n    };\n  },\n  computed: {\n    bindAttrs: function bindAttrs() {\n      return {\n        syncToApp: this.syncToApp,\n        syncToLocal: this.syncToLocal\n      };\n    },\n    bindEvents: function bindEvents() {\n      return {\n        'to-app': this.onToApp,\n        'to-local': this.onToLocal\n      };\n    }\n  },\n  created: function created() {\n    this.loadEnabledTypes();\n  },\n  methods: {\n    handleMenuClick: function handleMenuClick() {\n      console.log(arguments);\n    },\n    onToApp: function onToApp(e) {\n      this.doSync(e.type, '/toApp');\n    },\n    onToLocal: function onToLocal(e) {\n      this.doSync(e.type, '/toLocal');\n    },\n    // 获取启用的第三方App\n    loadEnabledTypes: function () {\n      var _loadEnabledTypes2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _loadEnabledTypes();\n\n              case 2:\n                this.enabledTypes = _context.sent;\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadEnabledTypes() {\n        return _loadEnabledTypes2.apply(this, arguments);\n      }\n\n      return loadEnabledTypes;\n    }(),\n    // 开始同步第三方App\n    doSync: function doSync(type, direction) {\n      var _this = this;\n\n      var urls = backEndUrl[type];\n\n      if (!(urls && urls[this.bizType])) {\n        console.warn('配置出错');\n        return;\n      }\n\n      var url = urls[this.bizType] + direction;\n      var selectedRowKeys = this.selectedRowKeys;\n      var content = '确定要开始同步全部数据吗？可能花费较长时间！';\n\n      if (Array.isArray(selectedRowKeys) && selectedRowKeys.length > 0) {\n        content = \"\\u786E\\u5B9A\\u8981\\u5F00\\u59CB\\u540C\\u6B65\\u8FD9 \".concat(selectedRowKeys.length, \" \\u9879\\u5417\\uFF1F\");\n      } else {\n        selectedRowKeys = [];\n      }\n\n      return new Promise(function (resolve, reject) {\n        var model = _this.$confirm({\n          title: '同步',\n          content: content,\n          onOk: function onOk() {\n            model.update({\n              keyboard: false,\n              okText: '同步中…',\n              cancelButtonProps: {\n                props: {\n                  disabled: true\n                }\n              }\n            });\n            return getAction(url, {\n              ids: selectedRowKeys.join(',')\n            }).then(function (res) {\n              var options = null;\n\n              if (res.result) {\n                options = {\n                  width: 600,\n                  title: res.message,\n                  content: function content(h) {\n                    var nodes;\n                    var successInfo = [\"\\u6210\\u529F\\u4FE1\\u606F\\u5982\\u4E0B\\uFF1A\", _this.renderTextarea(h, res.result.successInfo.map(function (v, i) {\n                      return \"\".concat(i + 1, \". \").concat(v);\n                    }).join('\\n'))];\n\n                    if (res.success) {\n                      nodes = [].concat(successInfo, [h('br'), \"\\u65E0\\u5931\\u8D25\\u4FE1\\u606F\\uFF01\"]);\n                    } else {\n                      nodes = [\"\\u5931\\u8D25\\u4FE1\\u606F\\u5982\\u4E0B\\uFF1A\", _this.renderTextarea(h, res.result.failInfo.map(function (v, i) {\n                        return \"\".concat(i + 1, \". \").concat(v);\n                      }).join('\\n')), h('br')].concat(successInfo);\n                    }\n\n                    return nodes;\n                  }\n                };\n              }\n\n              if (res.success) {\n                if (options != null) {\n                  _this.$success(options);\n                } else {\n                  _this.$message.success(res.message);\n                }\n\n                _this.$emit('sync-ok');\n              } else {\n                if (options != null) {\n                  _this.$warning(options);\n                } else {\n                  _this.$message.warning(res.message);\n                }\n\n                _this.$emit('sync-error');\n              }\n            }).catch(function () {\n              return model.destroy();\n            }).finally(function () {\n              resolve();\n\n              _this.$emit('sync-finally', {\n                type: type,\n                direction: direction,\n                isToApp: direction === '/toApp',\n                isToLocal: direction === '/toLocal'\n              });\n            });\n          },\n          onCancel: function onCancel() {\n            resolve();\n          }\n        });\n      });\n    },\n    renderTextarea: function renderTextarea(h, value) {\n      return h('a-textarea', {\n        props: {\n          value: value,\n          readOnly: true,\n          autosize: {\n            minRows: 5,\n            maxRows: 10\n          }\n        },\n        style: {\n          // 关闭textarea的自动换行，使其可以左右滚动\n          whiteSpace: 'pre',\n          overflow: 'auto'\n        }\n      });\n    }\n  }\n}; // 启用了哪些第三方App（在此缓存）\n\nvar enabledTypes = null; // 获取启用的第三方App\n\nfunction _loadEnabledTypes() {\n  return _loadEnabledTypes3.apply(this, arguments);\n}\n\nfunction _loadEnabledTypes3() {\n  _loadEnabledTypes3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var _yield$getAction, success, result;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(enabledTypes != null)) {\n              _context2.next = 4;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", cloneObject(enabledTypes));\n\n          case 4:\n            _context2.next = 6;\n            return getAction(backEndUrl.getEnabledType);\n\n          case 6:\n            _yield$getAction = _context2.sent;\n            success = _yield$getAction.success;\n            result = _yield$getAction.result;\n\n            if (!success) {\n              _context2.next = 14;\n              break;\n            }\n\n            // 在此缓存\n            enabledTypes = cloneObject(result);\n            return _context2.abrupt(\"return\", result);\n\n          case 14:\n            console.warn('getEnabledType查询失败：', res);\n\n          case 15:\n            return _context2.abrupt(\"return\", {});\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadEnabledTypes3.apply(this, arguments);\n}\n\nexport { _loadEnabledTypes as loadEnabledTypes };",{"version":3,"sources":["JThirdAppButton.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <span v-if=\"syncToApp || syncToLocal\">\n    <j-third-app-dropdown v-if=\"enabledTypes.wechatEnterprise\" type=\"wechatEnterprise\" name=\"企微\" v-bind=\"bindAttrs\" v-on=\"bindEvents\"/>\n    <j-third-app-dropdown v-if=\"enabledTypes.dingtalk\" type=\"dingtalk\" name=\"钉钉\" v-bind=\"bindAttrs\" v-on=\"bindEvents\"/>\n  </span>\n  <span v-else>未设置任何同步方向</span>\n</template>\n\n<script>\nimport { getAction } from '@/api/manage'\nimport { cloneObject } from '@/utils/util'\nimport JThirdAppDropdown from './JThirdAppDropdown'\n\nconst backEndUrl = {\n  // 获取启用的第三方App\n  getEnabledType: '/sys/thirdApp/getEnabledType',\n  // 企业微信\n  wechatEnterprise: {\n    user: '/sys/thirdApp/sync/wechatEnterprise/user',\n    depart: '/sys/thirdApp/sync/wechatEnterprise/depart',\n  },\n  // 钉钉\n  dingtalk: {\n    user: '/sys/thirdApp/sync/dingtalk/user',\n    depart: '/sys/thirdApp/sync/dingtalk/depart',\n  }\n}\n\nexport default {\n  name: 'JThirdAppButton',\n  components: {JThirdAppDropdown},\n  props: {\n    // 同步类型，可以是 user、depart\n    bizType: {\n      type: String,\n      required: true,\n    },\n    // 是否允许同步到第三方APP\n    syncToApp: Boolean,\n    // 是否允许第三方APP同步到本地\n    syncToLocal: Boolean,\n    // 选择的行\n    selectedRowKeys: Array,\n  },\n  data() {\n    return {\n      enabledTypes: {},\n      attrs: {\n        dingtalk: {},\n      },\n    }\n  },\n  computed: {\n    bindAttrs() {\n      return {\n        syncToApp: this.syncToApp,\n        syncToLocal: this.syncToLocal\n      }\n    },\n    bindEvents() {\n      return {\n        'to-app': this.onToApp,\n        'to-local': this.onToLocal,\n      }\n    },\n  },\n  created() {\n    this.loadEnabledTypes()\n  },\n  methods: {\n    handleMenuClick() {\n      console.log(arguments)\n    },\n    onToApp(e) {\n      this.doSync(e.type, '/toApp')\n    },\n    onToLocal(e) {\n      this.doSync(e.type, '/toLocal')\n    },\n    // 获取启用的第三方App\n    async loadEnabledTypes() {\n      this.enabledTypes = await loadEnabledTypes()\n    },\n    // 开始同步第三方App\n    doSync(type, direction) {\n      let urls = backEndUrl[type]\n      if (!(urls && urls[this.bizType])) {\n        console.warn('配置出错')\n        return\n      }\n      let url = urls[this.bizType] + direction\n\n      let selectedRowKeys = this.selectedRowKeys\n      let content = '确定要开始同步全部数据吗？可能花费较长时间！'\n      if (Array.isArray(selectedRowKeys) && selectedRowKeys.length > 0) {\n        content = `确定要开始同步这 ${selectedRowKeys.length} 项吗？`\n      } else {\n        selectedRowKeys = []\n      }\n      return new Promise((resolve, reject) => {\n        let model = this.$confirm({\n          title: '同步',\n          content,\n          onOk: () => {\n            model.update({\n              keyboard: false,\n              okText: '同步中…',\n              cancelButtonProps: {props: {disabled: true}}\n            })\n            return getAction(url, {\n              ids: selectedRowKeys.join(',')\n            }).then(res => {\n              let options = null\n              if (res.result) {\n                options = {\n                  width: 600,\n                  title: res.message,\n                  content: (h) => {\n                    let nodes\n                    let successInfo = [\n                      `成功信息如下：`,\n                      this.renderTextarea(h, res.result.successInfo.map((v, i) => `${i + 1}. ${v}`).join('\\n')),\n                    ]\n                    if (res.success) {\n                      nodes = [\n                        ...successInfo,\n                        h('br'),\n                        `无失败信息！`,\n                      ]\n                    } else {\n                      nodes = [\n                        `失败信息如下：`,\n                        this.renderTextarea(h, res.result.failInfo.map((v, i) => `${i + 1}. ${v}`).join('\\n')),\n                        h('br'),\n                        ...successInfo,\n                      ]\n                    }\n                    return nodes\n                  }\n                }\n              }\n              if (res.success) {\n                if (options != null) {\n                  this.$success(options)\n                } else {\n                  this.$message.success(res.message)\n                }\n                this.$emit('sync-ok')\n              } else {\n                if (options != null) {\n                  this.$warning(options)\n                } else {\n                  this.$message.warning(res.message)\n                }\n                this.$emit('sync-error')\n              }\n            }).catch(() => model.destroy()).finally(() => {\n              resolve()\n              this.$emit('sync-finally', {\n                type,\n                direction,\n                isToApp: direction === '/toApp',\n                isToLocal: direction === '/toLocal',\n              })\n            })\n          },\n          onCancel() {\n            resolve()\n          },\n        })\n      })\n    },\n    renderTextarea(h, value) {\n      return h('a-textarea', {\n        props: {\n          value: value,\n          readOnly: true,\n          autosize: {minRows: 5, maxRows: 10},\n        },\n        style: {\n          // 关闭textarea的自动换行，使其可以左右滚动\n          whiteSpace: 'pre',\n          overflow: 'auto',\n        }\n      })\n    }\n  },\n}\n\n// 启用了哪些第三方App（在此缓存）\nlet enabledTypes = null\n\n// 获取启用的第三方App\nexport async function loadEnabledTypes() {\n  // 获取缓存\n  if (enabledTypes != null) {\n    return cloneObject(enabledTypes)\n  } else {\n    let {success, result} = await getAction(backEndUrl.getEnabledType)\n    if (success) {\n      // 在此缓存\n      enabledTypes = cloneObject(result)\n      return result\n    } else {\n      console.warn('getEnabledType查询失败：', res)\n    }\n  }\n  return {}\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components/jeecgbiz/thirdApp"}]}