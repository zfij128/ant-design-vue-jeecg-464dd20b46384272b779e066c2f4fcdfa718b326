{"remainingRequest":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\babel-loader\\lib\\index.js!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\components\\menu\\index.js","dependencies":[{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\components\\menu\\index.js","mtime":1665386876000},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\babel-loader\\lib\\index.js","mtime":1665642924601},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1665642923347}],"contextDependencies":[],"result":["import _mergeJSXProps2 from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport Menu from 'ant-design-vue/es/menu';\nimport Icon from 'ant-design-vue/es/icon';\nvar Item = Menu.Item,\n    SubMenu = Menu.SubMenu;\nexport default {\n  name: 'SMenu',\n  props: {\n    menu: {\n      type: Array,\n      required: true\n    },\n    theme: {\n      type: String,\n      required: false,\n      default: 'dark'\n    },\n    mode: {\n      type: String,\n      required: false,\n      default: 'inline'\n    },\n    collapsed: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      openKeys: [],\n      selectedKeys: [],\n      cachedOpenKeys: []\n    };\n  },\n  computed: {\n    rootSubmenuKeys: function rootSubmenuKeys(vm) {\n      var keys = [];\n      vm.menu.forEach(function (item) {\n        return keys.push(item.path);\n      });\n      return keys;\n    }\n  },\n  mounted: function mounted() {\n    this.updateMenu();\n  },\n  watch: {\n    collapsed: function collapsed(val) {\n      if (val) {\n        this.cachedOpenKeys = this.openKeys.concat();\n        this.openKeys = [];\n      } else {\n        this.openKeys = this.cachedOpenKeys;\n      }\n    },\n    $route: function $route() {\n      this.updateMenu();\n    }\n  },\n  methods: {\n    // select menu item\n    onOpenChange: function onOpenChange(openKeys) {\n      var _this = this;\n\n      // 在水平模式下时执行，并且不再执行后续\n      if (this.mode === 'horizontal') {\n        this.openKeys = openKeys;\n        return;\n      } // 非水平模式时\n\n\n      var latestOpenKey = openKeys.find(function (key) {\n        return !_this.openKeys.includes(key);\n      });\n\n      if (!this.rootSubmenuKeys.includes(latestOpenKey)) {\n        this.openKeys = openKeys;\n      } else {\n        this.openKeys = latestOpenKey ? [latestOpenKey] : [];\n      }\n    },\n    updateMenu: function updateMenu() {\n      var routes = this.$route.matched.concat();\n      var hidden = this.$route.meta.hidden;\n\n      if (routes.length >= 3 && hidden) {\n        routes.pop();\n        this.selectedKeys = [routes[routes.length - 1].path];\n      } else {\n        this.selectedKeys = [routes.pop().path];\n      }\n\n      var openKeys = [];\n\n      if (this.mode === 'inline') {\n        routes.forEach(function (item) {\n          openKeys.push(item.path);\n        });\n      } // update-begin-author:sunjianlei date:20210409 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n      // 包含冒号的是动态菜单\n\n\n      if (this.selectedKeys[0].includes(':')) {\n        var selectedKey = this.$route.fullPath;\n        this.selectedKeys = [selectedKey];\n        var newOpenKeys = [];\n        this.fullOpenKeys(this.menu, selectedKey, newOpenKeys);\n\n        if (newOpenKeys.length > 0) {\n          openKeys = newOpenKeys.reverse();\n        }\n      } // update-end-author:sunjianlei date:20210409 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n      //update-begin-author:taoyan date:20190510 for:online表单菜单点击展开的一级目录不对\n\n\n      if (!this.selectedKeys || this.selectedKeys[0].indexOf(\":\") < 0) {\n        this.collapsed ? this.cachedOpenKeys = openKeys : this.openKeys = openKeys;\n      } //update-end-author:taoyan date:20190510 for:online表单菜单点击展开的一级目录不对\n\n    },\n    // update-begin-author:sunjianlei date:20210409 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n    // 递归查找当前选中的菜单和父级菜单，填充openKeys\n    fullOpenKeys: function fullOpenKeys(menus, selectedKey, openKeys) {\n      var _iterator = _createForOfIteratorHelper(menus),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n\n          if (item.path === selectedKey) {\n            openKeys.push(item.path);\n            this.$emit('updateMenuTitle', item);\n            return true;\n          } else if (Array.isArray(item.children)) {\n            if (this.fullOpenKeys(item.children, selectedKey, openKeys)) {\n              openKeys.push(item.path);\n              return true;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    },\n    // update-end-author:sunjianlei date:20210409 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n    // render\n    renderItem: function renderItem(menu) {\n      if (!menu.hidden) {\n        return menu.children && !menu.alwaysShow ? this.renderSubMenu(menu) : this.renderMenuItem(menu);\n      }\n\n      return null;\n    },\n    renderMenuItem: function renderMenuItem(menu) {\n      var h = this.$createElement;\n      var target = menu.meta.target || null;\n      var tag = target && 'a' || 'router-link';\n      var props = {\n        to: {\n          name: menu.name\n        }\n      };\n\n      if (menu.route && menu.route === '0') {\n        props = {\n          to: {\n            path: menu.path\n          }\n        };\n      }\n\n      var attrs = {\n        href: menu.path,\n        target: menu.meta.target\n      };\n\n      if (menu.children && menu.alwaysShow) {\n        // 把有子菜单的 并且 父菜单是要隐藏子菜单的\n        // 都给子菜单增加一个 hidden 属性\n        // 用来给刷新页面时， selectedKeys 做控制用\n        menu.children.forEach(function (item) {\n          item.meta = Object.assign(item.meta, {\n            hidden: true\n          });\n        });\n      }\n\n      return h(Item, _mergeJSXProps([{}, {\n        key: menu.path\n      }]), [h(tag, {\n        \"props\": _objectSpread({}, props),\n        \"attrs\": _objectSpread({}, attrs)\n      }, [this.renderIcon(menu.meta.icon), h(\"span\", [menu.meta.title])])]);\n    },\n    renderSubMenu: function renderSubMenu(menu) {\n      var _this2 = this;\n\n      var h = this.$createElement;\n      var itemArr = [];\n\n      if (!menu.alwaysShow) {\n        menu.children.forEach(function (item) {\n          return itemArr.push(_this2.renderItem(item));\n        });\n      }\n\n      return h(SubMenu, _mergeJSXProps2([{}, {\n        key: menu.path\n      }]), [h(\"span\", {\n        \"slot\": \"title\"\n      }, [this.renderIcon(menu.meta.icon), h(\"span\", [menu.meta.title])]), itemArr]);\n    },\n    renderIcon: function renderIcon(icon) {\n      var h = this.$createElement;\n\n      if (icon === 'none' || icon === undefined) {\n        return null;\n      }\n\n      var props = {};\n      _typeof(icon) === 'object' ? props.component = icon : props.type = icon;\n      return h(Icon, {\n        \"props\": _objectSpread({}, props)\n      });\n    }\n  },\n  render: function render() {\n    var _this3 = this;\n\n    var h = arguments[0];\n    var mode = this.mode,\n        theme = this.theme,\n        menu = this.menu;\n    var props = {\n      mode: mode,\n      theme: theme,\n      openKeys: this.openKeys\n    };\n    var on = {\n      select: function select(obj) {\n        _this3.selectedKeys = obj.selectedKeys;\n\n        _this3.$emit('select', obj);\n      },\n      openChange: this.onOpenChange\n    };\n    var menuTree = menu.map(function (item) {\n      if (item.hidden) {\n        return null;\n      }\n\n      return _this3.renderItem(item);\n    }); // {...{ props, on: on }}\n\n    return h(Menu, {\n      \"props\": _objectSpread({}, props),\n      \"on\": _objectSpread({}, on),\n      \"model\": {\n        value: _this3.selectedKeys,\n        callback: function callback($$v) {\n          _this3.selectedKeys = $$v;\n        }\n      }\n    }, [menuTree]);\n  }\n};",{"version":3,"sources":["D:/云晟/前端/ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326/src/components/menu/index.js"],"names":["Menu","Icon","Item","SubMenu","name","props","menu","type","Array","required","theme","String","default","mode","collapsed","Boolean","data","openKeys","selectedKeys","cachedOpenKeys","computed","rootSubmenuKeys","vm","keys","forEach","item","push","path","mounted","updateMenu","watch","val","concat","$route","methods","onOpenChange","latestOpenKey","find","key","includes","routes","matched","hidden","meta","length","pop","selectedKey","fullPath","newOpenKeys","fullOpenKeys","reverse","indexOf","menus","$emit","isArray","children","renderItem","alwaysShow","renderSubMenu","renderMenuItem","target","tag","to","route","attrs","href","Object","assign","renderIcon","icon","title","itemArr","undefined","component","render","on","select","obj","openChange","menuTree","map"],"mappings":"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","sourcesContent":["import Menu from 'ant-design-vue/es/menu'\nimport Icon from 'ant-design-vue/es/icon'\n\nconst { Item, SubMenu } = Menu\n\nexport default {\n  name: 'SMenu',\n  props: {\n    menu: {\n      type: Array,\n      required: true\n    },\n    theme: {\n      type: String,\n      required: false,\n      default: 'dark'\n    },\n    mode: {\n      type: String,\n      required: false,\n      default: 'inline'\n    },\n    collapsed: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n  data () {\n    return {\n      openKeys: [],\n      selectedKeys: [],\n      cachedOpenKeys: []\n    }\n  },\n  computed: {\n    rootSubmenuKeys: vm => {\n      const keys = []\n      vm.menu.forEach(item => keys.push(item.path))\n      return keys\n    }\n  },\n  mounted () {\n    this.updateMenu()\n  },\n  watch: {\n    collapsed (val) {\n      if (val) {\n        this.cachedOpenKeys = this.openKeys.concat()\n        this.openKeys = []\n      } else {\n        this.openKeys = this.cachedOpenKeys\n      }\n    },\n    $route: function () {\n      this.updateMenu()\n    }\n  },\n  methods: {\n    // select menu item\n    onOpenChange (openKeys) {\n\n      // 在水平模式下时执行，并且不再执行后续\n      if (this.mode === 'horizontal') {\n        this.openKeys = openKeys\n        return\n      }\n      // 非水平模式时\n      const latestOpenKey = openKeys.find(key => !this.openKeys.includes(key))\n      if (!this.rootSubmenuKeys.includes(latestOpenKey)) {\n        this.openKeys = openKeys\n      } else {\n        this.openKeys = latestOpenKey ? [latestOpenKey] : []\n      }\n    },\n    updateMenu () {\n      const routes = this.$route.matched.concat()\n      const { hidden } = this.$route.meta\n      if (routes.length >= 3 && hidden) {\n        routes.pop()\n        this.selectedKeys = [routes[routes.length - 1].path]\n      } else {\n        this.selectedKeys = [routes.pop().path]\n      }\n      let openKeys = []\n      if (this.mode === 'inline') {\n        routes.forEach(item => {\n          openKeys.push(item.path)\n        })\n      }\n\n      // update-begin-author:sunjianlei date:20210409 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n      // 包含冒号的是动态菜单\n      if (this.selectedKeys[0].includes(':')) {\n        let selectedKey = this.$route.fullPath\n        this.selectedKeys = [selectedKey]\n        let newOpenKeys = []\n        this.fullOpenKeys(this.menu, selectedKey, newOpenKeys)\n        if (newOpenKeys.length > 0) {\n          openKeys = newOpenKeys.reverse()\n        }\n      }\n      // update-end-author:sunjianlei date:20210409 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n\n      //update-begin-author:taoyan date:20190510 for:online表单菜单点击展开的一级目录不对\n      if(!this.selectedKeys || this.selectedKeys[0].indexOf(\":\")<0){\n        this.collapsed ? (this.cachedOpenKeys = openKeys) : (this.openKeys = openKeys)\n      }\n      //update-end-author:taoyan date:20190510 for:online表单菜单点击展开的一级目录不对\n    },\n    // update-begin-author:sunjianlei date:20210409 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n    // 递归查找当前选中的菜单和父级菜单，填充openKeys\n    fullOpenKeys(menus, selectedKey, openKeys) {\n      for (let item of menus) {\n        if (item.path === selectedKey) {\n          openKeys.push(item.path)\n          this.$emit('updateMenuTitle', item)\n          return true\n        } else if (Array.isArray(item.children)) {\n          if (this.fullOpenKeys(item.children, selectedKey, openKeys)) {\n            openKeys.push(item.path)\n            return true\n          }\n        }\n      }\n    },\n    // update-end-author:sunjianlei date:20210409 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n\n    // render\n    renderItem (menu) {\n      if (!menu.hidden) {\n        return menu.children && !menu.alwaysShow ? this.renderSubMenu(menu) : this.renderMenuItem(menu)\n      }\n      return null\n    },\n    renderMenuItem (menu) {\n      const target = menu.meta.target || null\n      const tag = target && 'a' || 'router-link'\n      let props = { to: { name: menu.name } }\n      if(menu.route && menu.route === '0'){\n        props = { to: { path: menu.path } }\n      }\n\n      const attrs = { href: menu.path, target: menu.meta.target }\n\n      if (menu.children && menu.alwaysShow) {\n        // 把有子菜单的 并且 父菜单是要隐藏子菜单的\n        // 都给子菜单增加一个 hidden 属性\n        // 用来给刷新页面时， selectedKeys 做控制用\n        menu.children.forEach(item => {\n          item.meta = Object.assign(item.meta, { hidden: true })\n        })\n      }\n\n      return (\n        <Item {...{ key: menu.path }}>\n          <tag {...{ props, attrs }}>\n            {this.renderIcon(menu.meta.icon)}\n            <span>{menu.meta.title}</span>\n          </tag>\n        </Item>\n      )\n    },\n    renderSubMenu (menu) {\n      const itemArr = []\n      if (!menu.alwaysShow) {\n        menu.children.forEach(item => itemArr.push(this.renderItem(item)))\n      }\n      return (\n        <SubMenu {...{ key: menu.path }}>\n          <span slot=\"title\">\n            {this.renderIcon(menu.meta.icon)}\n            <span>{menu.meta.title}</span>\n          </span>\n          {itemArr}\n        </SubMenu>\n      )\n    },\n    renderIcon (icon) {\n      if (icon === 'none' || icon === undefined) {\n        return null\n      }\n      const props = {}\n      typeof (icon) === 'object' ? props.component = icon : props.type = icon\n      return (\n        <Icon {... { props } }/>\n      )\n    }\n  },\n\n  render () {\n    const { mode, theme, menu } = this\n    const props = {\n      mode: mode,\n      theme: theme,\n      openKeys: this.openKeys\n    }\n    const on = {\n      select: obj => {\n        this.selectedKeys = obj.selectedKeys\n        this.$emit('select', obj)\n      },\n      openChange: this.onOpenChange\n    }\n\n    const menuTree = menu.map(item => {\n      if (item.hidden) {\n        return null\n      }\n      return this.renderItem(item)\n    })\n    // {...{ props, on: on }}\n    return (\n      <Menu vModel={this.selectedKeys} {...{ props, on: on }}>\n        {menuTree}\n      </Menu>\n    )\n  }\n}\n"]}]}