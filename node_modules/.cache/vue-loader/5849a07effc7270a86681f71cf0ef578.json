{"remainingRequest":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\views\\user\\alteration\\Step3.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\views\\user\\alteration\\Step3.vue","mtime":1665386876000},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\babel-loader\\lib\\index.js","mtime":1665642924601},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js","mtime":1665642924058}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import { getAction } from '@/api/manage'\n  export default {\n    name: \"Step3\",\n//    components: {\n//      Result\n//    },\n    props: ['userList'],\n    data () {\n      return {\n        model:{},\n        layout: {\n          labelCol: { span: 5 },\n          wrapperCol: { span: 19 },\n        },\n        loading: false,\n        accountName: this.userList.username,\n        validatorRules: {\n          password: [{\n            required: true, pattern: /^(?=.*[a-zA-Z])(?=.*\\d)(?=.*[~!@#$%^&*()_+`\\-={}:\";'<>?,.\\/]).{8,}$/, message: '密码由8位数字、大小写字母和特殊符号组成!!'\n          }],\n          confirmPassword: [\n            { required: true, message: '密码不能为空!'},\n            { validator: this.handlePasswordCheck}\n          ]\n        }\n      }\n    },\n    methods: {\n      nextStep () {\n        let that = this\n        that.loading = true\n        that.$refs['form'].validate(success => {\n          if (success === true) {\n            let params = {\n              username: that.userList.username,\n              password: that.model.password,\n              smscode: that.userList.smscode,\n              phone: that.userList.phone,\n            }\n            getAction(\"/sys/user/passwordChange\", params).then((res) => {\n              if (res.success) {\n                let userList = {\n                  username: that.userList.username\n                }\n                console.log(userList);\n                setTimeout(function() {\n                  that.$emit('nextStep', userList)\n                }, 1500)\n              } else {\n                that.passwordFailed(res.message);\n                that.loading = false\n              }\n            })\n          } else {\n            that.loading = false\n          }\n        })\n      },\n      prevStep () {\n        this.$emit('prevStep', this.userList)\n      },\n\n      handlePasswordCheck (rule, value, callback) {\n        let password = this.model['password']\n        if (value && password && value.trim() !== password.trim()) {\n          callback(new Error('两次密码不一致'))\n        }\n        callback()\n      },\n      passwordFailed(err){\n        this.$notification[ 'error' ]({\n          message: \"更改密码失败\",\n          description:err,\n          duration: 4,\n        });\n      },\n    }\n  }\n",{"version":3,"sources":["Step3.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Step3.vue","sourceRoot":"src/views/user/alteration","sourcesContent":["<template>\n  <div>\n    <a-form-model ref=\"form\" :model=\"model\" :rules=\"validatorRules\" class=\"password-retrieval-form\">\n\n      <a-form-model-item label=\"账号名\" v-bind=\"layout\">\n        <a-input type=\"text\" :value=\"accountName\" disabled/>\n      </a-form-model-item>\n\n      <a-form-model-item prop=\"password\" label=\"新密码\" v-bind=\"layout\" class=\"stepFormText\">\n        <a-input v-model=\"model.password\" type=\"password\" autocomplete=\"false\"/>\n      </a-form-model-item>\n\n      <a-form-model-item prop=\"confirmPassword\" label=\"确认密码\" v-bind=\"layout\" class=\"stepFormText\">\n        <a-input v-model=\"model.confirmPassword\" type=\"password\" autocomplete=\"false\"/>\n      </a-form-model-item>\n\n      <a-form-model-item :wrapperCol=\"{span: 19, offset: 5}\">\n        <a-button style=\"margin-left: 8px\" @click=\"prevStep\">上一步</a-button>\n        <a-button :loading=\"loading\" type=\"primary\" @click=\"nextStep\" style=\"margin-left:20px\">提交</a-button>\n      </a-form-model-item>\n    </a-form-model>\n  </div>\n</template>\n\n<script>\n  import { getAction } from '@/api/manage'\n  export default {\n    name: \"Step3\",\n//    components: {\n//      Result\n//    },\n    props: ['userList'],\n    data () {\n      return {\n        model:{},\n        layout: {\n          labelCol: { span: 5 },\n          wrapperCol: { span: 19 },\n        },\n        loading: false,\n        accountName: this.userList.username,\n        validatorRules: {\n          password: [{\n            required: true, pattern: /^(?=.*[a-zA-Z])(?=.*\\d)(?=.*[~!@#$%^&*()_+`\\-={}:\";'<>?,.\\/]).{8,}$/, message: '密码由8位数字、大小写字母和特殊符号组成!!'\n          }],\n          confirmPassword: [\n            { required: true, message: '密码不能为空!'},\n            { validator: this.handlePasswordCheck}\n          ]\n        }\n      }\n    },\n    methods: {\n      nextStep () {\n        let that = this\n        that.loading = true\n        that.$refs['form'].validate(success => {\n          if (success === true) {\n            let params = {\n              username: that.userList.username,\n              password: that.model.password,\n              smscode: that.userList.smscode,\n              phone: that.userList.phone,\n            }\n            getAction(\"/sys/user/passwordChange\", params).then((res) => {\n              if (res.success) {\n                let userList = {\n                  username: that.userList.username\n                }\n                console.log(userList);\n                setTimeout(function() {\n                  that.$emit('nextStep', userList)\n                }, 1500)\n              } else {\n                that.passwordFailed(res.message);\n                that.loading = false\n              }\n            })\n          } else {\n            that.loading = false\n          }\n        })\n      },\n      prevStep () {\n        this.$emit('prevStep', this.userList)\n      },\n\n      handlePasswordCheck (rule, value, callback) {\n        let password = this.model['password']\n        if (value && password && value.trim() !== password.trim()) {\n          callback(new Error('两次密码不一致'))\n        }\n        callback()\n      },\n      passwordFailed(err){\n        this.$notification[ 'error' ]({\n          message: \"更改密码失败\",\n          description:err,\n          duration: 4,\n        });\n      },\n    }\n  }\n</script>\n<style lang=\"less\" scoped>\n  .stepFormText {\n    margin-bottom: 24px;\n  }\n\n  .ant-form-item-label,\n  .ant-form-item-control {\n    line-height: 22px;\n  }\n\n</style>"]}]}