{"remainingRequest":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\views\\system\\modules\\AddressListRight.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\views\\system\\modules\\AddressListRight.vue","mtime":1665386876000},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\babel-loader\\lib\\index.js","mtime":1665642924601},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js","mtime":1665642924058}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getAction } from '@/api/manage'\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin'\n\nexport default {\n  name: 'AddressListRight',\n  mixins: [JeecgListMixin],\n  components: {},\n  props: ['value'],\n  data() {\n    return {\n      description: '用户信息',\n      cardLoading: true,\n      positionInfo: {},\n      columns: [\n        {\n          title: '#',\n          key: 'rowIndex',\n          dataIndex: '',\n          width: 60,\n          align: 'center',\n          customRender: (t, r, i) => parseInt(i) + 1\n        },\n        {\n          title: '姓名',\n          width: '15%',\n          align: 'center',\n          dataIndex: 'realname'\n        },\n        {\n          title: '工号',\n          width: '15%',\n          align: 'center',\n          dataIndex: 'workNo'\n        },\n        {\n          title: '部门',\n          width: '20%',\n          align: 'center',\n          dataIndex: 'departName'\n        },\n        {\n          title: '职务',\n          width: '15%',\n          align: 'center',\n          dataIndex: 'post',\n          customRender: (text) => (text || '').split(',').map(t => this.positionInfo[t] ? this.positionInfo[t] : t).join(',')\n        },\n        {\n          title: '手机',\n          width: '15%',\n          align: 'center',\n          dataIndex: 'phone'\n        },\n        // {\n        //   title: '手机号',\n        //   width: '12%',\n        //   align: 'center',\n        //   dataIndex: 'phone'\n        // },\n        {\n          title: '公司邮箱',\n          width: '15%',\n          align: 'center',\n          dataIndex: 'email'\n        }\n      ],\n      url: {\n        list: '/sys/user/queryByOrgCodeForAddressList',\n        listByPosition: '/sys/position/list'\n      }\n    }\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler(orgCode) {\n        this.dataSource = []\n        this.loadData(1, orgCode)\n      }\n    },\n  },\n  created() {\n    this.queryPositionInfo()\n  },\n  methods: {\n\n    loadData(pageNum, orgCode) {\n      this.loading = true\n      if (pageNum === 1) {\n          this.ipagination.current = 1\n      }\n      // update-begin- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\n      if (!orgCode) {\n          getAction(this.url.list, {\n              ...this.getQueryParams()\n          }).then((res) => {\n              if (res.success) {\n                  this.dataSource = res.result.records\n                  this.ipagination.total = res.result.total\n              }\n          }).finally(() => {\n              this.loading = false\n              this.cardLoading = false\n          })\n        // update-end- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\n      }else{\n      //加载数据 若传入参数1则加载第一页的内容\n      getAction(this.url.list, {\n        orgCode,\n        ...this.getQueryParams()\n      }).then((res) => {\n        if (res.success) {\n          this.dataSource = res.result.records\n          this.ipagination.total = res.result.total\n        }\n      }).finally(() => {\n        this.loading = false\n        this.cardLoading = false\n      })\n      }\n    },\n\n    searchQuery() {\n      this.loadData(1, this.value)\n    },\n    searchReset() {\n      this.queryParam = {}\n      this.loadData(1, this.value)\n    },\n\n    handleTableChange(pagination, filters, sorter) {\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field\n        this.isorter.order = 'ascend' === sorter.order ? 'asc' : 'desc'\n      }\n      this.ipagination = pagination\n      this.loadData(null, this.value)\n    },\n\n    // 查询职务信息\n    queryPositionInfo() {\n      getAction(this.url.listByPosition, { pageSize: 99999 }).then(res => {\n        if (res.success) {\n          let positionInfo = {}\n          res.result.records.forEach(record => {\n            positionInfo[record['code']] = record['name']\n          })\n          this.positionInfo = positionInfo\n        }\n      })\n    }\n\n  }\n}\n",{"version":3,"sources":["AddressListRight.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"AddressListRight.vue","sourceRoot":"src/views/system/modules","sourcesContent":["<template>\n  <a-card class=\"j-address-list-right-card-box\" :loading=\"cardLoading\" :bordered=\"false\">\n    <div class=\"table-page-search-wrapper\">\n      <a-form-model layout=\"inline\" :model=\"queryParam\">\n        <a-row :gutter=\"10\">\n\n          <a-col :md=\"6\" :sm=\"12\">\n            <a-form-model-item label=\"姓名\" prop=\"realname\" style=\"margin-left:8px\">\n              <a-input placeholder=\"请输入姓名查询\" v-model=\"queryParam.realname\"></a-input>\n            </a-form-model-item>\n          </a-col>\n\n\n          <a-col :md=\"6\" :sm=\"12\">\n            <a-form-model-item label=\"工号\" prop=\"workNo\" style=\"margin-left:8px\">\n              <a-input placeholder=\"请输入工号查询\" v-model=\"queryParam.workNo\"></a-input>\n            </a-form-model-item>\n          </a-col>\n\n          <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\n            <a-col :md=\"6\" :sm=\"24\">\n             <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\" style=\"margin-left: 18px\">查询</a-button>\n              <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\n            </a-col>\n          </span>\n        </a-row>\n      </a-form-model>\n    </div>\n\n    <a-table\n      ref=\"table\"\n      size=\"middle\"\n      bordered\n      rowKey=\"userId\"\n      :pagination=\"ipagination\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :loading=\"loading\"\n      @change=\"handleTableChange\">\n    </a-table>\n\n  </a-card>\n</template>\n\n<script>\n  import { getAction } from '@/api/manage'\n  import { JeecgListMixin } from '@/mixins/JeecgListMixin'\n\n  export default {\n    name: 'AddressListRight',\n    mixins: [JeecgListMixin],\n    components: {},\n    props: ['value'],\n    data() {\n      return {\n        description: '用户信息',\n        cardLoading: true,\n        positionInfo: {},\n        columns: [\n          {\n            title: '#',\n            key: 'rowIndex',\n            dataIndex: '',\n            width: 60,\n            align: 'center',\n            customRender: (t, r, i) => parseInt(i) + 1\n          },\n          {\n            title: '姓名',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'realname'\n          },\n          {\n            title: '工号',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'workNo'\n          },\n          {\n            title: '部门',\n            width: '20%',\n            align: 'center',\n            dataIndex: 'departName'\n          },\n          {\n            title: '职务',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'post',\n            customRender: (text) => (text || '').split(',').map(t => this.positionInfo[t] ? this.positionInfo[t] : t).join(',')\n          },\n          {\n            title: '手机',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'phone'\n          },\n          // {\n          //   title: '手机号',\n          //   width: '12%',\n          //   align: 'center',\n          //   dataIndex: 'phone'\n          // },\n          {\n            title: '公司邮箱',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'email'\n          }\n        ],\n        url: {\n          list: '/sys/user/queryByOrgCodeForAddressList',\n          listByPosition: '/sys/position/list'\n        }\n      }\n    },\n    watch: {\n      value: {\n        immediate: true,\n        handler(orgCode) {\n          this.dataSource = []\n          this.loadData(1, orgCode)\n        }\n      },\n    },\n    created() {\n      this.queryPositionInfo()\n    },\n    methods: {\n\n      loadData(pageNum, orgCode) {\n        this.loading = true\n        if (pageNum === 1) {\n            this.ipagination.current = 1\n        }\n        // update-begin- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\n        if (!orgCode) {\n            getAction(this.url.list, {\n                ...this.getQueryParams()\n            }).then((res) => {\n                if (res.success) {\n                    this.dataSource = res.result.records\n                    this.ipagination.total = res.result.total\n                }\n            }).finally(() => {\n                this.loading = false\n                this.cardLoading = false\n            })\n          // update-end- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\n        }else{\n        //加载数据 若传入参数1则加载第一页的内容\n        getAction(this.url.list, {\n          orgCode,\n          ...this.getQueryParams()\n        }).then((res) => {\n          if (res.success) {\n            this.dataSource = res.result.records\n            this.ipagination.total = res.result.total\n          }\n        }).finally(() => {\n          this.loading = false\n          this.cardLoading = false\n        })\n        }\n      },\n\n      searchQuery() {\n        this.loadData(1, this.value)\n      },\n      searchReset() {\n        this.queryParam = {}\n        this.loadData(1, this.value)\n      },\n\n      handleTableChange(pagination, filters, sorter) {\n        if (Object.keys(sorter).length > 0) {\n          this.isorter.column = sorter.field\n          this.isorter.order = 'ascend' === sorter.order ? 'asc' : 'desc'\n        }\n        this.ipagination = pagination\n        this.loadData(null, this.value)\n      },\n\n      // 查询职务信息\n      queryPositionInfo() {\n        getAction(this.url.listByPosition, { pageSize: 99999 }).then(res => {\n          if (res.success) {\n            let positionInfo = {}\n            res.result.records.forEach(record => {\n              positionInfo[record['code']] = record['name']\n            })\n            this.positionInfo = positionInfo\n          }\n        })\n      }\n\n    }\n  }\n</script>\n<style>\n  .j-address-list-right-card-box .ant-table-placeholder {\n    min-height: 46px;\n  }\n</style>\n<style scoped>\n  .j-address-list-right-card-box {\n    height: 100%;\n    min-height: 300px;\n  }\n</style>"]}]}