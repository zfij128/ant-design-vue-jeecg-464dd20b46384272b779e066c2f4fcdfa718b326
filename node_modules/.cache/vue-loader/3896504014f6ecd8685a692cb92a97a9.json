{"remainingRequest":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\views\\user\\Login.vue?vue&type=style&index=0&id=1ecd471f&lang=less&scoped=true&","dependencies":[{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\views\\user\\Login.vue","mtime":1665386876000},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\css-loader\\index.js","mtime":1665642925383},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1665642924059},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\postcss-loader\\src\\index.js","mtime":1665642925858},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\less-loader\\dist\\cjs.js","mtime":1665642924256},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js","mtime":1665642924058}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.user-layout-login {\n  label {\n    font-size: 14px;\n  }\n.getCaptcha {\n    display: block;\n    width: 100%;\n    height: 40px;\n  }\n\n.forge-password {\n    font-size: 14px;\n  }\n\n  button.login-button {\n    padding: 0 15px;\n    font-size: 16px;\n    height: 40px;\n    width: 100%;\n  }\n\n.user-login-other {\n    text-align: left;\n    margin-top: 24px;\n    line-height: 22px;\n\n  .item-icon {\n      font-size: 24px;\n      color: rgba(0,0,0,.2);\n      margin-left: 16px;\n      vertical-align: middle;\n      cursor: pointer;\n      transition: color .3s;\n\n    &:hover {\n        color: #1890ff;\n      }\n    }\n\n  .register {\n      float: right;\n    }\n  }\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"main\">\n    <a-form-model class=\"user-layout-login\" @keyup.enter.native=\"handleSubmit\">\n      <a-tabs :activeKey=\"customActiveKey\" :tabBarStyle=\"{ textAlign: 'center', borderBottom: 'unset' }\"  @change=\"handleTabClick\">\n        <a-tab-pane key=\"tab1\" tab=\"账号密码登录\">\n          <login-account ref=\"alogin\" @validateFail=\"validateFail\" @success=\"requestSuccess\" @fail=\"requestFailed\"></login-account>\n        </a-tab-pane>\n\n      </a-tabs>\n\n      <a-form-model-item>\n        <a-checkbox @change=\"handleRememberMeChange\" default-checked>自动登录</a-checkbox>\n        <router-link :to=\"{ name: 'alteration'}\" class=\"forge-password\" style=\"float: right;\">\n          忘记密码\n        </router-link>\n       </a-form-model-item>\n\n      <a-form-item style=\"margin-top:24px\">\n        <a-button size=\"large\"  type=\"primary\"  htmlType=\"submit\"  class=\"login-button\"  :loading=\"loginBtn\"  @click.stop.prevent=\"handleSubmit\" :disabled=\"loginBtn\">确定\n        </a-button>\n      </a-form-item>\n\n    </a-form-model>\n\n    <two-step-captcha v-if=\"requiredTwoStepCaptcha\" :visible=\"stepCaptchaVisible\" @success=\"stepCaptchaSuccess\" @cancel=\"stepCaptchaCancel\"></two-step-captcha>\n    <login-select-tenant ref=\"loginSelect\" @success=\"loginSelectOk\"></login-select-tenant>\n\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { ACCESS_TOKEN, ENCRYPTED_STRING } from '@/store/mutation-types'\nimport ThirdLogin from './third/ThirdLogin'\nimport LoginSelectTenant from './LoginSelectTenant'\nimport TwoStepCaptcha from '@/components/tools/TwoStepCaptcha'\nimport { getEncryptedString } from '@/utils/encryption/aesEncrypt'\nimport { timeFix } from '@/utils/util'\n\nimport LoginAccount from './LoginAccount'\nimport LoginPhone from './LoginPhone'\n\nexport default {\n    components: {\n      LoginSelectTenant,\n      TwoStepCaptcha,\n      ThirdLogin,\n      LoginAccount,\n      LoginPhone\n    },\n    data () {\n      return {\n        customActiveKey: 'tab1',\n        rememberMe: true,\n        loginBtn: false,\n        requiredTwoStepCaptcha: false,\n        stepCaptchaVisible: false,\n        encryptedString:{\n          key:\"\",\n          iv:\"\",\n        },\n      }\n    },\n    created() {\n      Vue.ls.remove(ACCESS_TOKEN)\n      this.getRouterData();\n      this.rememberMe = true\n    },\n    methods:{\n      handleTabClick(key){\n        this.customActiveKey = key\n      },\n      handleRememberMeChange(e){\n        this.rememberMe = e.target.checked\n      },\n      /**跳转到登录页面的参数-账号获取*/\n      getRouterData(){\n        this.$nextTick(() => {\n          let temp = this.$route.params.username || this.$route.query.username || ''\n          if (temp) {\n            this.$refs.alogin.acceptUsername(temp)\n          }\n        })\n      },\n\n      //登录\n      handleSubmit () {\n        this.loginBtn = true;\n        if (this.customActiveKey === 'tab1') {\n          // 使用账户密码登录\n          this.$refs.alogin.handleLogin(this.rememberMe)\n        } else {\n          //手机号码登录\n          this.$refs.plogin.handleLogin(this.rememberMe)\n        }\n      },\n      // 校验失败\n      validateFail(){\n        this.loginBtn = false;\n      },\n      // 登录后台成功\n      requestSuccess(loginResult){\n        this.$refs.loginSelect.show(loginResult)\n      },\n      //登录后台失败\n      requestFailed (err) {\n        let description = ((err.response || {}).data || {}).message || err.message || \"请求出现错误，请稍后再试\"\n        this.$notification[ 'error' ]({\n          message: '登录失败',\n          description: description,\n          duration: 4,\n        });\n        //账户密码登录错误后更新验证码\n        if(this.customActiveKey === 'tab1' && description.indexOf('密码错误')>0){\n          this.$refs.alogin.handleChangeCheckCode()\n        }\n        this.loginBtn = false;\n      },\n      loginSelectOk(){\n        this.loginSuccess()\n      },\n      //登录成功\n      loginSuccess () {\n        this.$router.push({ path: \"/dashboard/analysis\" }).catch(()=>{\n          console.log('登录跳转首页出错,这个错误从哪里来的')\n        })\n        this.$notification.success({\n          message: '欢迎',\n          description: `${timeFix()}，欢迎回来`,\n        });\n      },\n\n      stepCaptchaSuccess () {\n        this.loginSuccess()\n      },\n      stepCaptchaCancel () {\n        this.Logout().then(() => {\n          this.loginBtn = false\n          this.stepCaptchaVisible = false\n        })\n      },\n      //获取密码加密规则\n      getEncrypte(){\n        var encryptedString = Vue.ls.get(ENCRYPTED_STRING);\n        if(encryptedString == null){\n          getEncryptedString().then((data) => {\n            this.encryptedString = data\n          });\n        }else{\n          this.encryptedString = encryptedString;\n        }\n      }\n\n    }\n\n  }\n</script>\n<style lang=\"less\" scoped>\n  .user-layout-login {\n    label {\n      font-size: 14px;\n    }\n  .getCaptcha {\n      display: block;\n      width: 100%;\n      height: 40px;\n    }\n\n  .forge-password {\n      font-size: 14px;\n    }\n\n    button.login-button {\n      padding: 0 15px;\n      font-size: 16px;\n      height: 40px;\n      width: 100%;\n    }\n\n  .user-login-other {\n      text-align: left;\n      margin-top: 24px;\n      line-height: 22px;\n\n    .item-icon {\n        font-size: 24px;\n        color: rgba(0,0,0,.2);\n        margin-left: 16px;\n        vertical-align: middle;\n        cursor: pointer;\n        transition: color .3s;\n\n      &:hover {\n          color: #1890ff;\n        }\n      }\n\n    .register {\n        float: right;\n      }\n    }\n  }\n</style>\n<style>\n  .valid-error .ant-select-selection__placeholder{\n    color: #f5222d;\n  }\n</style>"]}]}