{"remainingRequest":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeUserSelectCell.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeUserSelectCell.vue","mtime":1665386876000},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\babel-loader\\lib\\index.js","mtime":1665642924601},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1665642925904},{"path":"D:\\云晟\\前端\\ant-design-vue-jeecg-464dd20b46384272b779e066c2f4fcdfa718b326\\node_modules\\vue-loader\\lib\\index.js","mtime":1665642924058}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport JVxeCellMixins, { dispatchEvent } from '@/components/jeecg/JVxeTable/mixins/JVxeCellMixins'\nimport JSelectUserByDepModal from '@/components/jeecgbiz/modal/JSelectUserByDepModal'\n\nexport default {\n  name: 'JVxeUserSelectCell',\n  mixins: [JVxeCellMixins],\n  components: { JSelectUserByDepModal },\n  data() {\n    return {\n      userIds:'',\n      userNames:'',\n      innerUserValue: '',\n      selectedOptions: []\n    }\n  },\n  computed: {\n    custProps() {\n      const {userIds, originColumn: col, caseId, cellProps} = this\n      return {\n        ...cellProps,\n        value: userIds,\n        field: col.field || col.key,\n        groupId: caseId,\n        class: 'jvxe-select'\n      }\n    },\n    componentDisabled(){\n      console.log('333',this.cellProps)\n      if(this.cellProps.disabled==true){\n        return true\n      }\n      return false\n    },\n    modalWidth(){\n      if(this.cellProps.modalWidth){\n        return this.cellProps.modalWidth\n      }else{\n        return 1250\n      }\n    },\n    multi(){\n      if(this.cellProps.multi==false){\n        return false\n      }else{\n        return true\n      }\n    },\n    storeField(){\n      if(this.originColumn){\n        const str = this.originColumn.fieldExtendJson\n        if(str){\n          let json = JSON.parse(str)\n          if(json && json.store){\n            return json.store\n          }\n        }\n      }\n      return 'username'\n    },\n    textField(){\n      if(this.originColumn){\n        const str = this.originColumn.fieldExtendJson\n        if(str){\n          let json = JSON.parse(str)\n          if(json && json.text){\n            return json.text\n          }\n        }\n      }\n      return 'realname'\n    }\n  },\n  watch: {\n    innerValue: {\n      immediate: true,\n      handler(val) {\n        if (val == null || val === '') {\n          this.userIds = ''\n        } else {\n          this.userIds = val\n        }\n      }\n    }\n  },\n  methods: {\n    openSelect() {\n      // disabled 不弹窗\n      if (this.componentDisabled) {\n        return\n      }\n      this.$refs.selectModal.showModal()\n    },\n    selectOK(rows, idstr) {\n      console.log(\"当前选中用户\", rows)\n      console.log(\"当前选中用户ID\", idstr)\n      if (!rows) {\n        this.userNames = ''\n        this.userIds = ''\n      } else {\n        this.userIds = rows.map(row => row[this.storeField]).join(',')\n        this.userNames = rows.map(row => row[this.textField]).join(',')\n      }\n      this.handleChangeCommon(this.userIds)\n    },\n    handleEmpty(){\n      this.selectOK('')\n    },\n    initComp(userNames) {\n      this.userNames = userNames\n    },\n  },\n  enhanced: {\n    switches: {\n      visible: true\n    },\n    translate: {\n      enabled: false\n    }\n  }\n}\n",{"version":3,"sources":["JVxeUserSelectCell.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"JVxeUserSelectCell.vue","sourceRoot":"src/components/jeecg/JVxeTable/components/cells","sourcesContent":["<template>\n  <div>\n    <a-input\n      v-show=\"!userIds\"\n      @click=\"openSelect\"\n      placeholder=\"请选择用户\"\n      v-model=\"userNames\"\n      readOnly\n      class=\"jvxe-select-input\"\n      :disabled=\"componentDisabled\">\n      <a-icon slot=\"prefix\" type=\"user\" title=\"用户选择控件\"/>\n    </a-input>\n    <j-select-user-by-dep-modal\n      ref=\"selectModal\"\n      :modal-width=\"modalWidth\"\n      :multi=\"multi\"\n      :user-ids=\"userIds\"\n      @ok=\"selectOK\"\n      :store=\"storeField\"\n      :text=\"textField\"\n      @initComp=\"initComp\"/>\n    <span style=\"display: inline-block;height:100%;padding-left:14px\" v-if=\"userIds\" >\n      <span @click=\"openSelect\" style=\"display: inline-block;vertical-align: middle\">{{ userNames }}</span>\n      <a-icon v-if=\"!componentDisabled\" style=\"margin-left:5px;vertical-align: middle\" type=\"close-circle\" @click=\"handleEmpty\" title=\"清空\"/>\n    </span>\n  </div>\n\n <!-- <j-select-user-by-dep\n    v-bind=\"custProps\"\n    @change=\"handleChange\"\n    :trigger-change=\"true\">\n  </j-select-user-by-dep>-->\n</template>\n\n<script>\n  import JVxeCellMixins, { dispatchEvent } from '@/components/jeecg/JVxeTable/mixins/JVxeCellMixins'\n  import JSelectUserByDepModal from '@/components/jeecgbiz/modal/JSelectUserByDepModal'\n\n  export default {\n    name: 'JVxeUserSelectCell',\n    mixins: [JVxeCellMixins],\n    components: { JSelectUserByDepModal },\n    data() {\n      return {\n        userIds:'',\n        userNames:'',\n        innerUserValue: '',\n        selectedOptions: []\n      }\n    },\n    computed: {\n      custProps() {\n        const {userIds, originColumn: col, caseId, cellProps} = this\n        return {\n          ...cellProps,\n          value: userIds,\n          field: col.field || col.key,\n          groupId: caseId,\n          class: 'jvxe-select'\n        }\n      },\n      componentDisabled(){\n        console.log('333',this.cellProps)\n        if(this.cellProps.disabled==true){\n          return true\n        }\n        return false\n      },\n      modalWidth(){\n        if(this.cellProps.modalWidth){\n          return this.cellProps.modalWidth\n        }else{\n          return 1250\n        }\n      },\n      multi(){\n        if(this.cellProps.multi==false){\n          return false\n        }else{\n          return true\n        }\n      },\n      storeField(){\n        if(this.originColumn){\n          const str = this.originColumn.fieldExtendJson\n          if(str){\n            let json = JSON.parse(str)\n            if(json && json.store){\n              return json.store\n            }\n          }\n        }\n        return 'username'\n      },\n      textField(){\n        if(this.originColumn){\n          const str = this.originColumn.fieldExtendJson\n          if(str){\n            let json = JSON.parse(str)\n            if(json && json.text){\n              return json.text\n            }\n          }\n        }\n        return 'realname'\n      }\n    },\n    watch: {\n      innerValue: {\n        immediate: true,\n        handler(val) {\n          if (val == null || val === '') {\n            this.userIds = ''\n          } else {\n            this.userIds = val\n          }\n        }\n      }\n    },\n    methods: {\n      openSelect() {\n        // disabled 不弹窗\n        if (this.componentDisabled) {\n          return\n        }\n        this.$refs.selectModal.showModal()\n      },\n      selectOK(rows, idstr) {\n        console.log(\"当前选中用户\", rows)\n        console.log(\"当前选中用户ID\", idstr)\n        if (!rows) {\n          this.userNames = ''\n          this.userIds = ''\n        } else {\n          this.userIds = rows.map(row => row[this.storeField]).join(',')\n          this.userNames = rows.map(row => row[this.textField]).join(',')\n        }\n        this.handleChangeCommon(this.userIds)\n      },\n      handleEmpty(){\n        this.selectOK('')\n      },\n      initComp(userNames) {\n        this.userNames = userNames\n      },\n    },\n    enhanced: {\n      switches: {\n        visible: true\n      },\n      translate: {\n        enabled: false\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  /deep/ .jvxe-select-input .ant-input {\n    border: none !important;\n  }\n</style>"]}]}